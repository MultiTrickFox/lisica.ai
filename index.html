<html>

    <head>
        <title>The Fox Den</title>
        <link rel="icon" type="image/x-icon" href="assets/favicon.png">
    </head>

    <body style="
    background-color: black;
    margin: 0;
    overflow-y: scroll;
    cursor: auto;
    -webkit-user-select: none;
    ">

        <link rel="stylesheet" href="style.css">

        <script src="https://js.stripe.com/v3/"></script>

        <script>

            // info

            var username
            var password

            var selectedItemDescription
            var selectedItemPrice

            // empty div

            function empty_div() {
                var empty_div = document.createElement('div')
                empty_div.style.height = '4.63535%'
                empty_div.style.width = '75%'
                return empty_div
            }

            document.body.appendChild(empty_div())
            
            // // fiction div
            
            // function title_div(title) {
            //     var title_div = document.createElement('div')
            //     title_div.style.height = '4.63535%'
            //     title_div.style.width = '16.66%'
            //     title_div.innerHTML = title
            //     title_div.style.color = 'silver'
            //     title_div.style.textAlign = 'center'
            //     title_div.style.fontFamily = 'Quicksand'
            //     title_div.style.fontSize = '26px'
            //     title_div.style.backgroundColor = 'transparent'
            //     document.body.append(title_div)
            //     document.body.append(empty_div())
            // }

            // title_div('Fiction')

            // project div

            var overlay = document.createElement('div')
            overlay.style.position = 'absolute'
            overlay.style.height = '46.3535%'
            overlay.style.width = '75%'
            overlay.style.backgroundColor = '#000'
            overlay.style.opacity = '0.6'
            overlay.style.borderRadius = '10px'
            overlay.style.marginLeft = 'auto'
            overlay.style.marginRight = 'auto'

            function project_div(title, title_extended, description, background, link) {

                var project_div = document.createElement('div')
                document.body.append(project_div)
                project_div.style.display = 'flex'
                project_div.style.flexDirection = 'column'
                project_div.style.justifyContent = 'flex-start'
                project_div.style.height = '46.3535%'
                project_div.style.width = '75%'
                project_div.style.backgroundImage = "url("+background+")"
                project_div.style.backgroundPosition = 'center'
                project_div.style.backgroundSize = 'cover'
                project_div.style.borderRadius = '10px'
                project_div.style.marginLeft = 'auto'
                project_div.style.marginRight = 'auto'
                project_div.style.lineHeight = '140%'

                var title_project = document.createElement('div')
                project_div.appendChild(title_project)
                title_project.style.position = 'relative'
                title_project.style.top = '20px'  
                title_project.style.left = '20px'  
                title_project.style.fontFamily = 'Quicksand'
                title_project.style.fontSize = '20px'    
                title_project.style.fontWeight = 'bold'
                title_project.style.color = '#fff'
                title_project.innerHTML = title

                var description_project = document.createElement('div')
                description_project.style.position = 'relative'
                description_project.style.top = '52px'  
                description_project.style.left = '20px'  
                description_project.style.fontFamily = 'Quicksand'
                description_project.style.fontSize = '14px' 
                description_project.style.color = '#fff'
                description_project.innerHTML = description
                description_project.style.overflowY = 'scroll'
                description_project.style.height = project_div.offsetHeight*2/3+'px'

                var project_mouseover = false
                var project_description_appearing = false

                project_div.onmouseover = function() {
                    project_mouseover = true
                    document.body.style.cursor = 'pointer'
                    if (!project_description_appearing) {
                        project_description_appearing = true
                        title_project.innerHTML = title_extended
                        const work = async () => {
                            project_div.removeChild(title_project)
                            project_div.appendChild(overlay)
                            project_div.appendChild(title_project)
                            project_div.appendChild(description_project)
                            var opacity = 0
                            for (var i = 0; i < 11; i++) {
                                description_project.style.opacity = opacity
                                opacity += .077
                                await sleep(.1)
                                if (!project_mouseover) return
                            }                
                        }
                        work()
                    }
                }

                project_div.onmouseleave = function() {
                    project_mouseover = false
                    document.body.style.cursor = 'auto'
                    project_div.removeChild(description_project)
                    project_div.removeChild(overlay)
                    project_description_appearing = false
                    description_project.style.opacity = 0
                    title_project.innerHTML = title
                }

                project_div.onclick = function() {
                    //window.location.href = link
                    window.open(link, '_blank')
                }

                document.body.append(empty_div())

            }

            project_div('Lisica', 'Lisica', "Visit this Zen-inspired shrine and meet Lisica,<br>&emsp;she is a friendly fox deity and the shrine's keeper.<br>Talk to her about anything that comes to mind,<br>&emsp;from daily life to abstract thoughts, to foxes even.<br>She's always welcoming towards all the visitors..<br><br>Available modes include:<br>&emsp;General chat<br>&emsp;Meditation<br>&emsp;Poetry<br>&emsp;Storytelling", 'assets/lisica_background.png', 'https://multitrickfox.itch.io/lisicaai')

            project_div('//upcoming//', '//upcoming//:', "", 'assets/default_background.jpeg', '')

            project_div('//upcoming//', '//upcoming//:', "", 'assets/default_background.jpeg', '')

            // user div

            var div_user = document.createElement('div')
            document.body.appendChild(div_user)
            div_user.style.display = 'flex'
            div_user.style.flexDirection = 'row'
            div_user.style.justifyContent = 'center'
            div_user.style.height = '46.3535%'
            div_user.style.width = '75%'
            div_user.style.marginLeft = 'auto'
            div_user.style.marginRight = 'auto'
            //div_user.style.border = '1.6px solid silver'
            //div_user.style.borderRadius = '60px'
            div_user.style.opacity = .666

            function welcome_user() {
                div_user.style.border = '1.6px solid silver'
                div_user.style.borderRadius = '60px'
                //alert('Accepted.') // bring up user page 
                div_user.style.fontFamily = 'Quicksand'
                div_user.style.fontSize = '16px'
                div_user.style.color = 'white'
                div_user.style.textAlign = 'center'
                var url = 'https://lisica.lisica.ai:64243/database'
                async function go_fetch() {

                    var xhr = new XMLHttpRequest();
                    xhr.open("GET", url, true)
                    xhr.setRequestHeader("username", text_username.value)
                    xhr.setRequestHeader("password", text_password.value)
                    xhr.setRequestHeader("cmd", "get_credit")
                            
                    xhr.onreadystatechange = function() {
                        if (xhr.readyState == XMLHttpRequest.DONE) {
                            var result = JSON.parse(xhr.responseText)

                            if (navigator.userAgent.match(/firefox|fxios/i)) div_user.innerHTML = '<pre>' + '\n\n\nWelcome,\n\n' + username + '\n\n\nTokens:&emsp;' + result.answer + '</pre>'
                            else div_user.innerHTML = '<br><br><br>Welcome,<br><br>' + username + '<br><br><br>Tokens:&emsp;' + result.answer
                    
                            // repeat get_credit

                            setInterval(function() {
                                var xhr = new XMLHttpRequest();
                                xhr.open("GET", url, true)
                                xhr.setRequestHeader("username", text_username.value)
                                xhr.setRequestHeader("password", text_password.value)
                                xhr.setRequestHeader("cmd", "get_credit")
                                xhr.onreadystatechange = function() {
                                    if (xhr.readyState == XMLHttpRequest.DONE) {
                                        var result = JSON.parse(xhr.responseText)
                                        if (navigator.userAgent.match(/firefox|fxios/i)) div_user.innerHTML = '<pre>' + '\n\n\nWelcome,\n\n' + username + '\n\n\nTokens:&emsp;' + result.answer + '</pre>'
                                        else div_user.innerHTML = '<br><br><br>Welcome,<br><br>' + username + '<br><br><br>Tokens:&emsp;' + result.answer
                                    }
                                }
                                xhr.send()
                            }, 5000)

                            // TODO: add 4 stats here, to left right top bot, and becomes brighter when u go there

                        }
                    }

                    xhr.send()

                    document.body.style.cursor = 'auto'
                } go_fetch()
            }

            if (username != null && password != null) welcome_user()

            else {

                var button_login = document.createElement('button')
                div_user.appendChild(button_login)
                button_login.innerHTML = 'Login'
                button_login.style.color = 'white'
                button_login.style.width = div_user.offsetWidth/6
                button_login.style.height = button_login.offsetWidth/1.618
                button_login.style.position = 'relative'
                button_login.style.marginLeft = 'auto'
                button_login.style.marginRight = 'auto'
                button_login.style.marginTop = 'auto'
                button_login.style.marginBottom = 'auto'
                button_login.style.backgroundColor = 'transparent'
                button_login.style.border = '2px solid white'
                button_login.style.borderRadius = '20px'
                button_login.style.fontFamily = 'Quicksand'
                button_login.style.fontSize = '16px'
                
                var button_signup = document.createElement('button')
                div_user.appendChild(button_signup)
                button_signup.innerHTML = 'Signup'
                button_signup.style.color = 'white'
                button_signup.style.width = div_user.offsetWidth/6
                button_signup.style.height = button_signup.offsetWidth/1.618
                button_signup.style.position = 'relative'
                button_signup.style.marginLeft = 'auto'
                button_signup.style.marginRight = 'auto'
                button_signup.style.marginTop = 'auto'
                button_signup.style.marginBottom = 'auto'
                button_signup.style.backgroundColor = 'transparent'
                button_signup.style.border = '2px solid white'
                button_signup.style.borderRadius = '20px'
                button_signup.style.fontFamily = 'Quicksand'
                button_signup.style.fontSize = '16px'

                var text_username = document.createElement('input')
                text_username.type = 'text'
                text_username.placeholder = 'username'
                text_username.style.color = 'white'
                text_username.style.textAlign = 'center'
                text_username.style.width = button_login.offsetWidth
                text_username.style.height = button_login.offsetHeight
                text_username.style.position = 'relative'
                text_username.style.marginLeft = 'auto'
                text_username.style.marginRight = 'auto'
                text_username.style.marginTop = 'auto'
                text_username.style.marginBottom = 'auto'
                text_username.style.backgroundColor = 'transparent'
                text_username.style.border = '2px solid white'
                text_username.style.borderRadius = '20px'
                text_username.style.fontFamily = 'Quicksand'
                text_username.style.fontSize = '14px'
                
                var text_password = document.createElement('input')
                text_password.type = 'password'
                text_password.placeholder = 'password'
                text_password.style.color = 'white'
                text_password.style.textAlign = 'center'
                text_password.style.width = button_login.offsetWidth
                text_password.style.height = button_login.offsetHeight
                text_password.style.position = 'relative'
                text_password.style.marginLeft = 'auto'
                text_password.style.marginRight = 'auto'
                text_password.style.marginTop = 'auto'
                text_password.style.marginBottom = 'auto'
                text_password.style.backgroundColor = 'transparent'
                text_password.style.border = '2px solid white'
                text_password.style.borderRadius = '20px'
                text_password.style.fontFamily = 'Quicksand'
                text_password.style.fontSize = '14px'
                
                var text_email = document.createElement('input')
                text_email.type = 'text'
                text_email.placeholder = 'email'
                text_email.style.color = 'white'
                text_email.style.textAlign = 'center'
                text_email.style.width = button_login.offsetWidth
                text_email.style.height = button_login.offsetHeight
                text_email.style.position = 'relative'
                text_email.style.marginLeft = 'auto'
                text_email.style.marginRight = 'auto'
                text_email.style.marginTop = 'auto'
                text_email.style.marginBottom = 'auto'
                text_email.style.backgroundColor = 'transparent'
                text_email.style.border = '2px solid white'
                text_email.style.borderRadius = '20px'
                text_email.style.fontFamily = 'Quicksand'
                text_email.style.fontSize = '14px'

                var button_proceed = document.createElement('button')
                button_proceed.style.width = button_login.offsetWidth
                button_proceed.style.height = button_login.offsetHeight
                button_proceed.innerHTML = 'Proceed'
                button_proceed.style.color = 'white'
                button_proceed.style.position = 'relative'
                button_proceed.style.marginLeft = 'auto'
                button_proceed.style.marginRight = 'auto'
                button_proceed.style.marginTop = 'auto'
                button_proceed.style.marginBottom = 'auto'
                button_proceed.style.backgroundColor = 'transparent'
                button_proceed.style.border = '2px solid white'
                button_proceed.style.borderRadius = '20px'
                button_proceed.style.fontFamily = 'Quicksand'
                button_proceed.style.fontSize = '16px'

                button_signup.onclick = function() {
                    div_user.removeChild(button_login)
                    div_user.removeChild(button_signup)
                    div_user.appendChild(text_username)
                    div_user.appendChild(text_password)
                    div_user.appendChild(text_email)
                    div_user.appendChild(button_proceed)
                    button_proceed.onclick = function() {
                        document.body.style.cursor = 'wait'
                        if (text_username.value == '' || text_password.value == '' || text_email.value == '') {
                            alert('Username/Password/Mail is not complete.')
                            document.body.style.cursor = 'auto'
                            return
                        }
                        var url = 'https://lisica.lisica.ai:64243/database'
                        async function go_fetch() {

                            var xhr = new XMLHttpRequest();
                            xhr.open("GET", url, true)
                            xhr.setRequestHeader("username", text_username.value)
                            xhr.setRequestHeader("password", text_password.value)
                            xhr.setRequestHeader("params", text_email.value)
                            xhr.setRequestHeader("cmd", "add_user")
                            
                            xhr.onreadystatechange = function() {
                                if (xhr.readyState == XMLHttpRequest.DONE) {
                                    var result = JSON.parse(xhr.responseText)
                                    if (result.answer == 'ACK.') { 
                                        username = text_username.value
                                        password = text_password.value
                                        div_user.removeChild(text_username)
                                        div_user.removeChild(text_password)
                                        div_user.removeChild(text_email)
                                        div_user.removeChild(button_proceed)
                                        welcome_user()
                                    } else { 
                                        alert('Username already present.')
                                        document.body.style.cursor = 'auto'
                                    }
                                }
                            }

                            xhr.send()

                        } go_fetch()                 
                    }
                }

                button_login.onclick = function() {
                    div_user.removeChild(button_login)
                    div_user.removeChild(button_signup)
                    div_user.appendChild(text_username)
                    div_user.appendChild(text_password)
                    div_user.appendChild(button_proceed)
                    button_proceed.onclick = function() {
                        document.body.style.cursor = 'wait'
                        if (text_username.value == '' || text_password.value == '') { 
                            alert('Username/Password is not complete.')
                            document.body.style.cursor = 'auto'
                            return
                        }
                        var url = 'https://lisica.lisica.ai:64243/database'
                        async function go_fetch() {

                            var xhr = new XMLHttpRequest();
                            xhr.open("GET", url, true)
                            xhr.setRequestHeader("username", text_username.value)
                            xhr.setRequestHeader("password", text_password.value)
                            xhr.setRequestHeader("cmd", "check_user")

                            xhr.onreadystatechange = function() {

                                if (xhr.readyState == XMLHttpRequest.DONE && xhr.status == 200) {
                                    var result = JSON.parse(xhr.responseText)
                                    if (result.answer == 'ACK.') {
                                        username = text_username.value
                                        password = text_password.value
                                        div_user.removeChild(text_username)
                                        div_user.removeChild(text_password)
                                        div_user.removeChild(button_proceed)
                                        welcome_user()
                                    } else {
                                        alert('Username/Password combination invalid.')
                                        document.body.style.cursor = 'auto'
                                    }
                                }
                            }

                            xhr.send()

                        } go_fetch()
                    }
                }

            }

            // empty div

            document.body.appendChild(empty_div()) 

            // tokens div

            var div_tokens = document.createElement('div')
            document.body.appendChild(div_tokens)
            div_tokens.style.display = 'flex'
            div_tokens.style.flexDirection = 'row'
            div_tokens.style.justifyContent = 'center'
            div_tokens.style.width = '75%'
            div_tokens.style.height = '46.3535%'
            div_tokens.style.marginLeft = 'auto'
            div_tokens.style.marginRight = 'auto'

            var div_token1_appearing = false
            var div_token5_appearing = false
            var div_token10_appearing = false
            var div_token20_appearing = false

            var stripe_appearing = false

            //

            var div_usd1 = document.createElement('div')
            div_tokens.appendChild(div_usd1)
            div_usd1.style.display = 'flex'
            div_usd1.style.flexDirection = 'column'
            div_usd1.style.justifyContent = 'flex-start'
            div_usd1.style.height = '100%'
            div_usd1.style.width = div_usd1.offsetHeight/1.618+'px'
            div_usd1.style.border = '1.6px solid silver'
            div_usd1.style.borderRadius = '16px'

            var div_usd1_title = document.createElement('div')
            div_usd1.appendChild(div_usd1_title)
            div_usd1_title.style.position = 'relative'
            div_usd1_title.style.top = '30px'    
            div_usd1_title.style.fontFamily = 'Quicksand'
            div_usd1_title.style.fontSize = '30px'    
            div_usd1_title.style.fontWeight = 'bold'
            div_usd1_title.style.color = '#fff'
            div_usd1_title.innerHTML = '1 USD'
            div_usd1_title.style.textAlign = 'center'

            var div_usd1_desc = document.createElement('div')
            div_usd1.appendChild(div_usd1_desc)
            div_usd1_desc.style.position = 'relative'
            div_usd1_desc.style.top = '80px'    
            div_usd1_desc.style.fontFamily = 'Quicksand'
            div_usd1_desc.style.fontSize = '20px'    
            div_usd1_desc.style.color = '#fff'
            div_usd1_desc.innerHTML = '5000<br>Tokens'
            div_usd1_desc.style.textAlign = 'center'

            var div_usd1_explanation = document.createElement('div')
            div_usd1.appendChild(div_usd1_explanation)
            div_usd1_explanation.style.position = 'relative'
            div_usd1_explanation.style.top = '130px'    
            div_usd1_explanation.style.fontFamily = 'Quicksand'
            div_usd1_explanation.style.fontSize = '16px'    
            div_usd1_explanation.style.color = '#fff'
            div_usd1_explanation.innerHTML = "I just want to check out these projects."
            div_usd1_explanation.style.textAlign = 'center'
            div_usd1_explanation.style.opacity = 0
            div_usd1_explanation.style.paddingLeft = '20px'
            div_usd1_explanation.style.paddingRight = '20px'

            div_usd1.onmouseover = function() {
                document.body.style.cursor = 'pointer'
                if (!div_token1_appearing) {
                    div_token1_appearing = true
                    const work = async () => {
                        var opacity = 0
                        for (var i = 0; i < 11; i++) {
                            div_usd1_explanation.style.opacity = opacity
                            opacity += .077
                            await sleep(.1)
                        }                
                    }
                    work()
                }
            }

            div_usd1.onmouseleave = function() {
                document.body.style.cursor = 'auto'
            }

            div_usd1.onclick = function() {
                selectedItemPrice = '1'
                selectedItemDescription = '1 USD'
                if (stripe_appearing) return
                else stripe_appearing = true
                button_pay.disabled = false
                const work = async () => {
                    var opacity = 0                    
                    for (var i = 0; i < 10; i++) {
                        opacity += .1
                        button_pay.style.opacity = opacity
                        await sleep(.06)
                    }  
                    stripe_appearing = false              
                }
                work()
            }

            //

            var div_empty = document.createElement('div')
            div_tokens.appendChild(div_empty)
            div_empty.style.height = '100%'
            div_empty.style.width = div_empty.offsetHeight/16+'px'

            //

            var div_usd5 = document.createElement('div')
            div_tokens.appendChild(div_usd5)
            div_usd5.style.display = 'flex'
            div_usd5.style.flexDirection = 'column'
            div_usd5.style.justifyContent = 'flex-start'
            div_usd5.style.height = '100%'
            div_usd5.style.width = div_usd5.offsetHeight/1.618+'px'
            div_usd5.style.border = '1.6px solid silver'
            div_usd5.style.borderRadius = '16px'

            var div_usd5_title = document.createElement('div')
            div_usd5.appendChild(div_usd5_title)
            div_usd5_title.style.position = 'relative'
            div_usd5_title.style.top = '30px'    
            div_usd5_title.style.fontFamily = 'Quicksand'
            div_usd5_title.style.fontSize = '30px'    
            div_usd5_title.style.fontWeight = 'bold'
            div_usd5_title.style.color = '#fff'
            div_usd5_title.innerHTML = '5 USD'
            div_usd5_title.style.textAlign = 'center'

            var div_usd5_desc = document.createElement('div')
            div_usd5.appendChild(div_usd5_desc)
            div_usd5_desc.style.position = 'relative'
            div_usd5_desc.style.top = '80px'    
            div_usd5_desc.style.fontFamily = 'Quicksand'
            div_usd5_desc.style.fontSize = '20px'    
            div_usd5_desc.style.color = '#fff'
            div_usd5_desc.innerHTML = '30000<br>Tokens'
            div_usd5_desc.style.textAlign = 'center'

            var div_usd5_explanation = document.createElement('div')
            div_usd5.appendChild(div_usd5_explanation)
            div_usd5_explanation.style.position = 'relative'
            div_usd5_explanation.style.top = '130px'    
            div_usd5_explanation.style.fontFamily = 'Quicksand'
            div_usd5_explanation.style.fontSize = '16px'    
            div_usd5_explanation.style.color = '#fff'
            div_usd5_explanation.innerHTML = "I was intrigued by my first trial."
            div_usd5_explanation.style.textAlign = 'center'
            div_usd5_explanation.style.opacity = 0
            div_usd5_explanation.style.paddingLeft = '20px'
            div_usd5_explanation.style.paddingRight = '20px'

            div_usd5.onmouseover = function() {
                document.body.style.cursor = 'pointer'
                if (!div_token5_appearing) {
                    div_token5_appearing = true
                    const work = async () => {
                        var opacity = 0
                        for (var i = 0; i < 11; i++) {
                            div_usd5_explanation.style.opacity = opacity
                            opacity += .077
                            await sleep(.1)
                        }                
                    }
                    work()
                }
            }

            div_usd5.onmouseleave = function() {
                document.body.style.cursor = 'auto'
            }

            div_usd5.onclick = function() {
                selectedItemPrice = '5'
                selectedItemDescription = '5 USD'
                if (stripe_appearing) return
                else stripe_appearing = true
                button_pay.disabled = false
                const work = async () => {
                    var opacity = 0                    
                    for (var i = 0; i < 10; i++) {
                        opacity += .1
                        button_pay.style.opacity = opacity
                        await sleep(.06)
                    }   
                    stripe_appearing = false             
                }
                work()
            }

            //

            var div_empty = document.createElement('div')
            div_tokens.appendChild(div_empty)
            div_empty.style.height = '100%'
            div_empty.style.width = div_empty.offsetHeight/16+'px'

            //

            var div_usd10 = document.createElement('div')
            div_tokens.appendChild(div_usd10)
            div_usd10.style.display = 'flex'
            div_usd10.style.flexDirection = 'column'
            div_usd10.style.justifyContent = 'flex-start'
            div_usd10.style.height = '100%'
            div_usd10.style.width = div_usd10.offsetHeight/1.618+'px'
            div_usd10.style.border = '1.6px solid silver'
            div_usd10.style.borderRadius = '16px'

            var div_usd10_title = document.createElement('div')
            div_usd10.appendChild(div_usd10_title)
            div_usd10_title.style.position = 'relative'
            div_usd10_title.style.top = '30px'    
            div_usd10_title.style.fontFamily = 'Quicksand'
            div_usd10_title.style.fontSize = '30px'    
            div_usd10_title.style.fontWeight = 'bold'
            div_usd10_title.style.color = '#fff'
            div_usd10_title.innerHTML = '10 USD'
            div_usd10_title.style.textAlign = 'center'

            var div_usd10_desc = document.createElement('div')
            div_usd10.appendChild(div_usd10_desc)
            div_usd10_desc.style.position = 'relative'
            div_usd10_desc.style.top = '80px'    
            div_usd10_desc.style.fontFamily = 'Quicksand'
            div_usd10_desc.style.fontSize = '20px'    
            div_usd10_desc.style.color = '#fff'
            div_usd10_desc.innerHTML = '80000<br>Tokens'
            div_usd10_desc.style.textAlign = 'center'

            var div_usd10_explanation = document.createElement('div')
            div_usd10.appendChild(div_usd10_explanation)
            div_usd10_explanation.style.position = 'relative'
            div_usd10_explanation.style.top = '130px'    
            div_usd10_explanation.style.fontFamily = 'Quicksand'
            div_usd10_explanation.style.fontSize = '16px'    
            div_usd10_explanation.style.color = '#fff'
            div_usd10_explanation.innerHTML = 'I find myself coming here often.'
            div_usd10_explanation.style.textAlign = 'center'
            div_usd10_explanation.style.opacity = 0
            div_usd10_explanation.style.paddingLeft = '20px'
            div_usd10_explanation.style.paddingRight = '20px'

            div_usd10.onmouseover = function() {
                document.body.style.cursor = 'pointer'
                if (!div_token10_appearing) {
                    div_token10_appearing = true
                    const work = async () => {
                        var opacity = 0
                        for (var i = 0; i < 11; i++) {
                            div_usd10_explanation.style.opacity = opacity
                            opacity += .077
                            await sleep(.1)
                        }                
                    }
                    work()
                }
            }

            div_usd10.onmouseleave = function() {
                document.body.style.cursor = 'auto'
            }

            div_usd10.onclick = function() {
                selectedItemPrice = '10'
                selectedItemDescription = '10 USD'
                if (stripe_appearing) return
                else stripe_appearing = true
                button_pay.disabled = false
                const work = async () => {
                    var opacity = 0                    
                    for (var i = 0; i < 10; i++) {
                        opacity += .1
                        button_pay.style.opacity = opacity
                        await sleep(.06)
                    }              
                    stripe_appearing = false  
                }
                work()
            }

            //

            var div_empty = document.createElement('div')
            div_tokens.appendChild(div_empty)
            div_empty.style.height = '100%'
            div_empty.style.width = div_empty.offsetHeight/16+'px'

            //

            var div_usd20 = document.createElement('div')
            div_tokens.appendChild(div_usd20)
            div_usd20.style.display = 'flex'
            div_usd20.style.flexDirection = 'column'
            div_usd20.style.justifyContent = 'flex-start'
            div_usd20.style.height = '100%'
            div_usd20.style.width = div_usd20.offsetHeight/1.618+'px'
            div_usd20.style.border = '1.6px solid silver'
            div_usd20.style.borderRadius = '16px'

            var div_usd20_title = document.createElement('div')
            div_usd20.appendChild(div_usd20_title)
            div_usd20_title.style.position = 'relative'
            div_usd20_title.style.top = '30px'    
            div_usd20_title.style.fontFamily = 'Quicksand'
            div_usd20_title.style.fontSize = '30px'    
            div_usd20_title.style.fontWeight = 'bold'
            div_usd20_title.style.color = '#fff'
            div_usd20_title.innerHTML = '20 USD'
            div_usd20_title.style.textAlign = 'center'

            var div_usd20_desc = document.createElement('div')
            div_usd20.appendChild(div_usd20_desc)
            div_usd20_desc.style.position = 'relative'
            div_usd20_desc.style.top = '80px'    
            div_usd20_desc.style.fontFamily = 'Quicksand'
            div_usd20_desc.style.fontSize = '20px'    
            div_usd20_desc.style.color = '#fff'
            div_usd20_desc.innerHTML = '200000<br>Tokens'
            div_usd20_desc.style.textAlign = 'center'

            var div_usd20_explanation = document.createElement('div')
            div_usd20.appendChild(div_usd20_explanation)
            div_usd20_explanation.style.position = 'relative'
            div_usd20_explanation.style.top = '130px'    
            div_usd20_explanation.style.fontFamily = 'Quicksand'
            div_usd20_explanation.style.fontSize = '16px'    
            div_usd20_explanation.style.color = '#fff'
            div_usd20_explanation.innerHTML = 'I am one of the regulars now.'
            div_usd20_explanation.style.textAlign = 'center'
            div_usd20_explanation.style.opacity = 0
            div_usd20_explanation.style.paddingLeft = '20px'
            div_usd20_explanation.style.paddingRight = '20px'

            div_usd20.onmouseover = function() {
                document.body.style.cursor = 'pointer'
                if (!div_token20_appearing) {
                    div_token20_appearing = true
                    const work = async () => {
                        var opacity = 0
                        for (var i = 0; i < 11; i++) {
                            div_usd20_explanation.style.opacity = opacity
                            opacity += .077
                            await sleep(.1)
                        }                
                    }
                    work()
                }
            }

            div_usd20.onmouseleave = function() {
                document.body.style.cursor = 'auto'
            }

            div_usd20.onclick = function() {
                selectedItemPrice = '20'
                selectedItemDescription = '20 USD'
                if (stripe_appearing) return
                else stripe_appearing = true
                button_pay.disabled = false
                const work = async () => {
                    var opacity = 0                    
                    for (var i = 0; i < 10; i++) {
                        opacity += .1
                        button_pay.style.opacity = opacity
                        await sleep(.06)
                    }
                    stripe_appearing = false               
                }
                work()
            }

            // empty div

            document.body.appendChild(empty_div())  

            // pay button div

            var button_pay_div = document.createElement('div')
            document.body.appendChild(button_pay_div)
            button_pay_div.style.width = div_usd1.offsetWidth*2/3
            button_pay_div.style.height = button_pay_div.offsetWidth/1.618/1.618
            button_pay_div.style.marginLeft = 'auto'
            button_pay_div.style.marginRight = 'auto'

            var button_pay = document.createElement('button')
            button_pay_div.appendChild(button_pay)
            button_pay.disabled = true         
            button_pay.style.opacity = 0
            button_pay.style.width = '100%' //div_usd1.offsetWidth*3/4
            button_pay.style.height = '100%' //button_pay.offsetWidth*3/4/1.618
            // button_pay.innerHTML = 'Stripe Checkout'
            // button_pay.style.color = 'white'
            // button_pay.style.textAlign = 'center'
            // button_pay.style.fontFamily = 'Quicksand'
            // button_pay.style.fontSize = '16px'
            // button_pay.style.backgroundColor = 'transparent'
            button_pay.style.border = '1px solid black'
            button_pay.style.borderRadius = '16px'
            button_pay.style.backgroundImage = 'url(assets/stripe_banner.png)'
            button_pay.style.backgroundPosition = 'center'
            button_pay.style.backgroundSize = 'cover'
            button_pay.style.cursor = 'pointer'

            var stripe = Stripe('pk_live_51L4pLcD1mkNNiGdjbPlxRAeGNNLGGtsxS2gXiiwGgqB8Ev2IJhDgWPercq8aR22LZyGlx5ZnYKCRQGWqoAisaigq00qsqNzagY')

            var stripe_launched = false

            button_pay.onclick = function() {

                if (username == null || password == null) { alert('Not logged in.'); return }

                if (stripe_launched) return
                else stripe_launched = true

                var price
                switch (selectedItemPrice) {
                    case '1': price = 'price_1L4vPqD1mkNNiGdjF22EtHGQ';  break
                    case '5': price = 'price_1L4vPqD1mkNNiGdjYCCQbFBe';  break
                    case '10': price = 'price_1L4vPqD1mkNNiGdjkqds9Pzw';  break
                    case '20': price = 'price_1L4vPqD1mkNNiGdjJDrCRjg6';  break
                }
                stripe.redirectToCheckout({
                    lineItems: [
                        {
                            price: price,
                            quantity: 1
                        }
                    ],
                    mode: 'payment',
                    successUrl: 'https://lisica.ai/checkout_success.html',
                    cancelUrl: 'https://lisica.ai/checkout_failure.html?'+username,
                })

            }

            // empty div

            document.body.appendChild(empty_div())

            // community div

            var button_community_div = document.createElement('div')
            document.body.appendChild(button_community_div)
            button_community_div.style.width = div_usd1.offsetWidth*1/6
            button_community_div.style.height = button_community_div.offsetWidth///1.618
            //button_community_div.style.marginLeft = 'auto'
            //button_community_div.style.marginRight = '3%'
            //button_community_div.style.marginRight = 'auto'
            //button_community_div.style.marginLeft = '1%'
            button_community_div.style.display = 'flex'
            button_community_div.style.flexDirection = 'row'
            button_community_div.style.justifyContent = 'center'

            var button_community = document.createElement('button')
            button_community_div.appendChild(button_community)           
            button_community.style.width = '100%'
            button_community.style.height = '100%'
            button_community.style.position = 'relative'
            button_community.marginLeft = 'auto'
            button_community.marginRight = 'auto'
            button_community.style.opacity = '.77'
            // button_community.innerHTML = 'Discord'
            button_community.style.color = 'white'
            button_community.style.textAlign = 'center'
            button_community.style.backgroundColor = 'transparent'
            button_community.style.fontFamily = 'Quicksand'
            button_community.style.fontSize = '16px'
            button_community.style.border = '.6px solid black'
            button_community.style.borderRadius = '66px'
            button_community.style.backgroundImage = 'url(assets/discord_banner.png)'
            button_community.style.backgroundPosition = 'center'
            button_community.style.backgroundSize = 'cover'
            button_community.style.cursor = 'pointer'
            button_community.style.backgroundColor = 'rgba(255, 255, 255, .92)'

            button_community.onmouseover = function() {
                //button_community.style.backgroundColor = 'rgba(86, 98, 246, 1)'
                button_community.style.backgroundColor = 'rgba(255, 255, 255, .96)'
            }

            button_community.onmouseleave = function() {
                //button_community.style.backgroundColor = 'rgba(86, 98, 246, 0)'
                button_community.style.backgroundColor = 'rgba(255, 255, 255, .92)'
            }

            button_community.onclick = function() {
                window.open('https://discord.gg/Unmu79D7h4', '_blank').focus()
            }

            // empty div

            //document.body.appendChild(empty_div())

            // helpers

            const sleep = sec => new Promise(r => setTimeout(r, sec*1_000))

        </script>

    </body>    

</html>